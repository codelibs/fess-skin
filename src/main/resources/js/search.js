$(function(){var c=$("#result");var d=$("#queryId");var e=$(".favorite",c);var a=$("#searchButton");var b=$("#contextPath").val();$("#searchForm").on("submit",function(g){a.attr("disabled",true);setTimeout(function(){a.attr("disabled",false)},3000);return true});$("#content").on("click touchend",function(g){if(!$(g.target).closest("#searchOptions, [data-toggle='control-options']").length){$("#searchOptions").removeClass("active")}});$("[data-toggle='control-options']").click(function(h){h.preventDefault();var g=$(this).attr("data-target")||$(this).attr("href");if(g){$(g).toggleClass("active")}});$("#searchOptionsClearButton").on("click",function(g){$("#labelTypeSearchOption").prop("selectedIndex",-1);$("#langSearchOption").prop("selectedIndex",0);$("#sortSearchOption").prop("selectedIndex",0);$("#numSearchOption").prop("selectedIndex",0);return false});c.on("mousedown","a.link",function(n){var h=$(this).attr("data-id"),m=$("#rt").val(),k=$("#queryId").val(),j=$(this).attr("data-order"),g=$(this).attr("href"),i=[];i.push(b);i.push("/go/?rt=");i.push(m);i.push("&docId=");i.push(h);i.push("&queryId=");i.push(k);i.push("&order=");i.push(j);var l=g.indexOf("#");if(l>=0){var o=g.substring(l);i.push("&hash=");i.push(encodeURIComponent(o))}$(this).attr("href",i.join(""))});c.on("mouseover","a.link",function(l){var k=$(this).attr("data-id"),g=$("#rt").val(),i=$(this).attr("href"),h=[];h.push(b);h.push("/go/?rt=");h.push(g);h.push("&docId=");h.push(k);var j=i.indexOf("#");if(j>=0){var m=i.substring(j);h.push("&hash=");h.push(encodeURIComponent(m));h.push(m)}});c.on("click","a.favorite",function(j){var k=$(this);var g=k.attr("href").split("#");if(g.length===2&&d.length>0){var i=b+"/json";var h=g[1];$.ajax({dataType:"json",cache:false,type:"post",timeoutNumber:10000,url:i,data:{type:"favorite",docId:h,queryId:d.val()}}).done(function(m){if(m.response.status===0&&typeof m.response.result!=="undefined"&&m.response.result==="ok"){var n=k.siblings(".favorited");var l=$(".favorited-count",n);l.css("display","none");k.fadeOut(1000,function(){n.fadeIn(1000)})}}).fail(function(l){k.attr("href","#"+h)})}$(this).attr("href","#");return false});if(e.length>0){$.ajax({dataType:"json",cache:false,type:"post",timeoutNumber:10000,url:b+"/json",data:{type:"favorites",queryId:d.val()}}).done(function(h){if(h.response.status===0&&typeof h.response.num!=="undefined"&&h.response.num>0){var j=h.response.doc_ids;for(var g=0;g<j.length;g++){j[g]="#"+j[g]}e.each(function(l){var o=$(this);var k=o.attr("href");var n=false;for(var m=0;m<j.length;m++){if(k===j[m]){n=true;break}}if(n){var p=o.siblings(".favorited");o.fadeOut(1000,function(){p.fadeIn(1000)})}})}}).fail(function(g){})}c.on("click",".more a",function(j){var i=$(this);var h=i.attr("href");if(h!==""){var g=$(h+" .info");if(g.length>0){i.fadeOut(500,function(){g.slideDown("slow")})}}return false});if(typeof $.fn.suggestor==="function"){$("#query").suggestor({ajaxinfo:{url:b+"/suggest",fn:"_default,content,title",num:10,lang:$("#langSearchOption").val()},boxCssInfo:{border:"1px solid rgba(82, 168, 236, 0.5)","-webkit-box-shadow":"0 1px 1px 0px rgba(0, 0, 0, 0.1), 0 3px 2px 0px rgba(82, 168, 236, 0.2)","-moz-box-shadow":"0 1px 1px 0px rgba(0, 0, 0, 0.1), 0 3px 2px 0px rgba(82, 168, 236, 0.2)","box-shadow":"0 1px 1px 0px rgba(0, 0, 0, 0.1), 0 3px 2px 0px rgba(82, 168, 236, 0.2)","background-color":"#fff","z-index":"10000"},listSelectedCssInfo:{"background-color":"rgba(82, 168, 236, 0.1)"},listDeselectedCssInfo:{"background-color":"#ffffff"},minterm:1,adjustWidthVal:11,searchForm:$("#searchForm")})}IMG_LOADING_DELAY=200;IMG_LOADING_MAX=0;var f=function(h,i,g){var j=new Image();$(j).on("load",function(){$(h).css("background-image","");$(h).attr("src",i)});$(j).on("error",function(){if(g>0){setTimeout(function(){f(h,i,--g)},IMG_LOADING_DELAY)}else{$(h).parent().parent().css("display","none")}j=null});j.src=i};$("img.thumbnail").each(function(){$(this).css("background-image",'url("'+b+'/images/loading.gif")');f(this,$(this).attr("data-src"),IMG_LOADING_MAX)})});